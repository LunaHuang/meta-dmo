Index: sshd@.service
===================================================================
--- .orig/sshd@.service
+++ sshd@.service
@@ -4,7 +4,7 @@ Wants=sshdgenkeys.service
 After=sshdgenkeys.service
 
 [Service]
-ExecStart=-@SBINDIR@/sshd -i
+ExecStart=-@SBINDIR@/sshd -i -f /etc/ssh/sshd_config_readonly
 ExecReload=@BASE_BINDIR@/kill -HUP $MAINPID
 StandardInput=socket
 StandardError=syslog
Index: sshdgenkeys.service
===================================================================
--- .orig/sshdgenkeys.service
+++ sshdgenkeys.service
@@ -1,11 +1,15 @@
 [Unit]
 Description=OpenSSH Key Generation
-ConditionPathExists=|!/etc/ssh/ssh_host_rsa_key
-ConditionPathExists=|!/etc/ssh/ssh_host_dsa_key
-ConditionPathExists=|!/etc/ssh/ssh_host_ecdsa_key
-ConditionPathExists=|!/etc/ssh/ssh_host_ed25519_key
+ConditionPathExists=|!/var/run/ssh/ssh_host_rsa_key
+ConditionPathExists=|!/var/run/ssh/ssh_host_dsa_key
+ConditionPathExists=|!/var/run/ssh/ssh_host_ecdsa_key
+ConditionPathExists=|!/var/run/ssh/ssh_host_ed25519_key
 
 [Service]
-ExecStart=@BINDIR@/ssh-keygen -A
+ExecStartPre=@BASE_BINDIR@/mkdir -p /var/run/ssh
+ExecStart=@BINDIR@/ssh-keygen -q -f /var/run/ssh/ssh_host_rsa_key -N '' -t rsa
+ExecStart=@BINDIR@/ssh-keygen -q -f /var/run/ssh/ssh_host_dsa_key -N '' -t dsa
+ExecStart=@BINDIR@/ssh-keygen -q -f /var/run/ssh/ssh_host_ecdsa_key -N '' -t ecdsa 
+ExecStart=@BINDIR@/ssh-keygen -q -f /var/run/ssh/ssh_host_ed25519_key -N '' -t ed25519
 Type=oneshot
 RemainAfterExit=yes
