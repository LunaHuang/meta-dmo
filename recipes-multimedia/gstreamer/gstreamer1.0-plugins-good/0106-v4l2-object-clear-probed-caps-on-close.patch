From: Michael Olbrich <m.olbrich@pengutronix.de>
Date: Mon, 18 Nov 2013 14:27:48 +0100
Subject: [PATCH] v4l2: object: clear probed caps on close

A different device may be used for the next open.

Signed-off-by: Michael Olbrich <m.olbrich@pengutronix.de>
---
 sys/v4l2/gstv4l2object.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/sys/v4l2/gstv4l2object.c b/sys/v4l2/gstv4l2object.c
index 5d20f52..654fc4d 100644
--- a/sys/v4l2/gstv4l2object.c
+++ b/sys/v4l2/gstv4l2object.c
@@ -920,6 +920,8 @@ gst_v4l2_object_close (GstV4l2Object * v4l2object)
   if (!gst_v4l2_close (v4l2object))
     return FALSE;
 
+  gst_caps_replace (&v4l2object->probed_caps, NULL);
+
   if (v4l2object->formats) {
     gst_v4l2_object_clear_format_list (v4l2object);
   }
